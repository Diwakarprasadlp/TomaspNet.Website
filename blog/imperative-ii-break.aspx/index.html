<!DOCTYPE html>
<!--[if IE 8]> 				 <html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->

<head>
  <meta charset="utf-8">
  <title>Imperative computation in F# (II.) - Writing break and continue</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="In the previous article of this series, we've implemented a computation expression that allows us to write imperative 'return' in F#. In this article, we'll add support for 'break' and 'continue'.">
  <meta name="author" content="Tomas Petricek">

  <!-- Reference Foundation -->
  <link rel="stylesheet" href="http://tomasp.net/css/foundation.css">
  <script src="js/vendor/custom.modernizr.js"></script>

  <link rel="alternate" type="application/rss+xml" href="http://tomasp.net/rss.xml" title="RSS feed for Tomas Petricek's blog">
  <link rel="icon" type="image/png" href="http://tomasp.net/img/favicon.png" />

  <!-- Reference custom CSS and tooltips -->
  <link type="text/css" rel="stylesheet" href="http://tomasp.net/custom/style.css" />
  <script type="text/javascript" src="http://tomasp.net/custom/tooltips.js"></script>
  <link type="text/css" rel="stylesheet" href="http://tomasp.net/custom/tooltips.css" />
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    <meta name="twitter:card" content="summary">
  <meta name="twitter:creator" content="@tomaspetricek">
  <meta name="twitter:title" content="Imperative computation in F# (II.) - Writing break and continue">
  <meta name="twitter:description" content="In the previous article of this series, we've implemented a computation expression that allows us to write imperative 'return' in F#. In this article, we'll add support for 'break' and 'continue'.">
</head>
<body>

   <header id="top-header">
    <div class="row">
      <div class="twelve columns">
        <h1><a href="http://tomasp.net/">Tomas Petricek's blog</a></h1>
        <p>Writing about practical F# coding and programming language research</p>
      </div>
    </div>
  </header>

  <header class="top-bar-header">
    <div class="contain-to-grid sticky">
    <nav class="top-bar">

    <ul class="title-area">
      <li class="name"><h1><a href="#"></a></h1></li>
      <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
    </ul>
    <section class="top-bar-section">
      <ul class="right">
        <li><a href="http://tomasp.net/blog/index.html">Blog</a></li>
        <li><a href="http://functional-programming.net">Books</a></li>
        <li><a href="http://fsharpworks.com/workshops.html">Trainings</a></li>
        <li><a href="http://fsharpworks.com">Consulting</a></li>
        <li><a href="http://tomasp.net/academic">Research</a></li>
      </ul>
    </section>

    </nav></div>
  </header>

  
<div class="row">
	<div class="large-8 columns main-content">
    <content>
      
<h1>Imperative computation in F# (II.) - Writing break and continue</h1>
<p>As I already wrote in the <a href="http://tomasp.net/blog/imperative-i-return.aspx">first part of this series</a>,
  the F# language doesn't support some of the language constructs known from imperative
  languages such as C#. In particular, we cannot use imperative <code>return</code> statement
  that returns the result of a function from any place in the function code. In functional languages,
  every construct is an expression, so to get the overall result of the function, the 
  F# language evaluates the expression and the value of the expression is used as the result.
  In the previous article, we've seen that we can simulate this construct in the F# language
  using F# computation expressions and I showed how to implement computation named <code>imperative</code>
  that allows us to write for example the <code>exists</code> function for working with sequences
  like this:</p>
<pre>
<span class="k">let</span> exists f inp = imperative {
  <span class="k">for</span> v <span class="k">in</span> inp <span class="k">do</span> 
    <span class="k">if</span> f(v) <span class="k">then</span> <span class="k">return</span> <span class="k">true</span>
  <span class="k">return</span> <span class="k">false</span> }
</pre>  
<p>In this article, we're going to look at two more imperative constructs and we're going
  to talk about <code>break</code> and <code>continue</code>. We'll see that we can quite
  easily extend the computation builder from the previous article to allow writing code
  that is syntactically very close to what you would write in C#. As I already mentioned,
  there are of course some performance overheads when using computation expressions, but 
  I find it very interesting how nice imperative syntax we can get in functional F#:</p>
<pre>
imperative { 
  <span class="k">for</span> x <span class="k">in</span> 1 .. 10 <span class="k">do</span> 
    <span class="k">if</span> (x % 3 = 0) <span class="k">then</span> <span class="k">do!</span> continue
    printfn <span class="s">"number = %d"</span> x }
</pre>  
<p>The only difference between this code and the code we'd probably write if F# supported
  <code>continue</code> as a keyword is that we need to wrap the code inside the <code>imperative</code>
  computation and that we need to add the <code>do!</code> primitive before the <code>continue</code>
  value. Now that we've seen an example of using the <code>continue</code> value inside
  the imperative computations, let's look how we can extend the computation builder from
  the previous article to add this feature...</p>  
  
<h2>Supporting break and continue</h2>  
<p>To add support for the <code>break</code> and <code>continue</code> primitives, we'll need to 
  slightly modify the type that represents the computation and then update the computation builder
  that we implemented in the previous article. As you can probably guess, the largest changes 
  will be done in the code that builds computation representing two F# looping constructs - 
  <code>for</code> and <code>while</code> loops. Let's start by looking at the computation type.</p>

<h3>Designing the computation type</h3>
<p>In the previous part of the series, we represented the computation as a function that takes
  <code>unit</code> as the argument and returns <code>option&lt;'T&gt;</code>. This allowed us
  to represent the case when the computation hasn't yet finished, because the <code>return</code>
  primitive wasn't used (the function returns <code>None</code>) and the case when the computation
  already has some result value (returning <code>Some</code>). To support the two jumping constructs,
  we'll need to add a case that represents a computation that is <em>jumping</em> out of the 
  iteration of a loop. We can declare the type like this:</p>

<pre>
<span class="k">type</span> ImperativeResult&lt;'T&gt; = 
  <span class="o">|</span> ImpValue <span class="k">of</span> 'T
  <span class="o">|</span> ImpJump <span class="k">of</span> bool
  <span class="o">|</span> ImpNone 
  
<span class="k">type</span> Imperative&lt;'T&gt; = unit -&gt; ImperativeResult&lt;'T&gt;
</pre>
<p>The <code>ImperativeResult&lt;'T&gt;</code> type is in principle just an extension of the 
  <code>option&lt;'T&gt;</code> type that adds one case - the <code>ImpJump</code> discriminator.
  The <code>bool</code> parameter specifies whether we want to continue executing the next 
  iteration of the loop after we break out of the current iteration. The value will be <code>true</code>
  when the user calls the <code>continue</code> primitive and for <code>break</code> we'll set
  it to <code>false</code>. The actual type that represents the computation is again
  just a function that returns one of the possible computation results.</p>

<h3>Implementing the computation builder</h3> 
<p>We'll split the implementation of the computation expression builder in a similar way
  as in the previous article and we'll start with the basic primitives that aren't related
  to loops. </p> 

<pre>
<span class="k">type</span> ImperativeBuilder() = 
  <span class="c">// When returning a value, we'll use the 'ImpValue' discriminator</span>
  <span class="k">member</span> x.Return(v) : Imperative&lt;<span class="o">_</span>&gt; = 
    (<span class="k">fun</span> () -&gt; ImpValue(v))
  <span class="c">// Expression that doesn't represent any value returns 'ImpNone'</span>
  <span class="k">member</span> x.Zero() = (<span class="k">fun</span> () -&gt; ImpNone)
  
  <span class="c">// Create a delayed imperative computation from a function</span>
  <span class="k">member</span> x.Delay(f:unit -&gt; Imperative&lt;<span class="o">_</span>&gt;) = 
    (<span class="k">fun</span> () -&gt; f()())

  <span class="c">// Combine two delayed computations that may return or jump</span>
  <span class="k">member</span> x.Combine(a, b) = (<span class="k">fun</span> () -&gt;
    <span class="k">match</span> a() <span class="k">with</span> 
    <span class="c">// The computation doesn't have value - evaluate the next</span>
    <span class="o">|</span> ImpNone -&gt; b() 
    <span class="c">// If the computation returned value or called break/return</span>
    <span class="c">// we'll propagate the value representing the result</span>
    <span class="o">|</span> res -&gt; res)
  
  <span class="c">// Execute the imperative computation given as the argument  </span>
  <span class="k">member</span> x.Run&lt;'T&gt;(imp) = 
    <span class="c">// When the computation returns 'ImpJump' it is an indication</span>
    <span class="c">// that 'break' or 'continue' was used incorrectly.</span>
    <span class="k">match</span> imp() <span class="k">with</span>
    <span class="o">|</span> ImpValue(v) -&gt; v
    <span class="o">|</span> ImpJump <span class="o">_</span> -&gt; failwith <span class="s">"Invalid use of break/continue!"</span>
    <span class="o">|</span> <span class="o">_</span> -&gt; failwith <span class="s">"No value has been returend!"</span>

<span class="k">let</span> imperative = <span class="k">new</span> ImperativeBuilder()  
</pre>
<p>If you compare the listing with the code from the previous article, you'll see
  that there are relatively few changes. First of all, we've changed all occurrences
  of <code>None</code> into <code>ImpNone</code> and also all uses of <code>Some</code>
  into <code>ImpValue</code>, which are our new representations of missing or present values.
  However, there are a few places where we needed to modify the code to correctly handle
  <code>ImpJump</code> values. In the <code>Combine</code> primitive, we're now 
  returning the result of the first computation not only when it is a result created
  using <code>return</code>, but also when the user uses <code>break</code> or <code>continue</code>
  and we'll get the <code>ImpJump</code> value. This means that when we're combining two 
  pieces of computations inside the body of the loop, we won't execute the second 
  computation if the first one contained a jumping construct. As a next change, we also added 
  a new case to the <code>Run</code> primitive which returns an error if the 
  computation ends with a value representing a jump. This means that a <code>break</code> or
  <code>continue</code> construct was used outside of a loop, which is incorrect.</p>  
 
<h3>Adding support for loops</h3>
<p>Most of the interesting changes in the code will be in the parts that implement
  looping constructs. In particular, we'll use a different primitive for composing 
  iterations of the loop - in the previous article we just used the <code>Combine</code>
  member from both <code>While</code> and <code>For</code>. However, in the new version,
  we'll need to handle loops differently. Before the computation can start a new iteration
  of a loop, it needs to check whether the previous iteration returned <code>ImpJump</code>.
  If it returned value representing <code>break</code> then we'll need to break the loop
  immediately without returning a result. If the previous iteration contained the <code>continue</code>
  construct, then we'll just continue executing the next iteration - the jump represented by 
  <code>continue</code> was already performed because we didn't run any more code after
  reaching the <code>continue</code> primitive in the previous iteration (this is the 
  case, because the <code>Combine</code> primitive doesn't call the second computation when
  it gets <code>ImpJump</code> as the result from the first one).</p>  

<pre>
<span class="k">type</span> ImperativeBuilder <span class="k">with</span> 
  <span class="c">// A local helper used when composing iterations of loops</span>
  <span class="c">// in the 'For' and 'While' primitives below.</span>
  <span class="k">member</span> x.CombineLoop(a, b) = (<span class="k">fun</span> () -&gt;
    <span class="k">match</span> a() <span class="k">with</span> 
    <span class="c">// When the last iteration returns a value, propagate the result</span>
    <span class="o">|</span> ImpValue(v) -&gt; ImpValue(v) 
    <span class="c">// The last iteration contained 'break', so we'll </span>
    <span class="c">// return missing value as the result from the loop</span>
    <span class="o">|</span> ImpJump(<span class="k">false</span>) -&gt; ImpNone
    <span class="c">// When the last iteration didn't contain any special construct</span>
    <span class="c">// or when it ended with 'continue', we'll continue looping</span>
    <span class="o">|</span> ImpJump(<span class="k">true</span>)
    <span class="o">|</span> ImpNone -&gt; b() )
  
  <span class="c">// 'For' and 'While' members that implement the looping constructs</span>
  <span class="c">// are similar as in the previous version, with the exception that they</span>
  <span class="c">// compose iterations using the special 'CombineLoop' primitive</span>
  <span class="k">member</span> x.For(inp:seq&lt;<span class="o">_</span>&gt;, f) =
    <span class="k">let</span> <span class="k">rec</span> loop(en:IEnumerator&lt;<span class="o">_</span>&gt;) = 
      <span class="k">if</span> not(en.MoveNext()) <span class="k">then</span> x.Zero() <span class="k">else</span>
        x.CombineLoop(f(en.Current), x.Delay(<span class="k">fun</span> () -&gt; loop(en)))
    loop(inp.GetEnumerator())
  <span class="k">member</span> x.While(gd, body) = 
    <span class="k">let</span> <span class="k">rec</span> loop() =
      <span class="k">if</span> not(gd()) <span class="k">then</span> x.Zero() <span class="k">else</span>
        x.CombineLoop(body, x.Delay(<span class="k">fun</span> () -&gt; loop()))
    loop()         
  
  <span class="c">// A call to this member is inserted when we use the 'do!' construct. If the 'v'</span>
  <span class="c">// value is either 'break' or 'continue', we will return 'ImpJump' as the result</span>
  <span class="k">member</span> x.Bind(v:Imperative&lt;unit&gt;, f : unit -&gt; Imperative&lt;<span class="o">_</span>&gt;) = (<span class="k">fun</span> () -&gt;
    <span class="k">match</span> v() <span class="k">with</span>
    <span class="o">|</span> ImpJump(kind) -&gt; ImpJump(kind)
    <span class="o">|</span> <span class="o">_</span> -&gt; f()() )
     
<span class="c">// Primitives that return the 'ImpJump' value when executed </span>
<span class="k">let</span> break = (<span class="k">fun</span> () -&gt; ImpJump(<span class="k">false</span>))
<span class="k">let</span> continue = (<span class="k">fun</span> () -&gt; ImpJump(<span class="k">true</span>))
</pre>

<p>As you can see, we've added a primitive named <code>CombineLoop</code> and used
  it instead of the usual <code>Combine</code> when implementing the looping constructs.
  The reason for this change is that once we introduce <code>break</code> and <code>continue</code>,
  we need to handle them differently when composing for example a sequence of statements
  and when composing iterations of a loop. </p>
<p>The listing also defines two primitive values of the <code>Imperative&lt;'T&gt;</code> type
  that simply return the <code>ImpJump</code> result. Note that these give us the only
  way we can use to build a computation that contains jumps. We've also added the <code>Bind</code>
  member to the computation builder, which means that we can now write <code>do!</code>
  inside the computation expression. The only values of the <code>Imperative&lt;'T&gt;</code> type
  that we have available are <code>break</code> and <code>continue</code>, so they are the
  only two primitives that we can use with the <code>do!</code> construct.</p>  
  
<h2>Using 'break' and 'continue' in F#</h2>
<p>Now we have everything we need to write imperative loops with <code>break</code> or <code>continue</code>
  in F#. I'm sure you know many cases where these primitives are useful, so let's just briefly look
  at two simple snippets that demonstrate how we can use them. In the first example, we'll
  write a <code>for</code> loop and we'll use <code>continue</code> to skip evaluation of some iterations
  of the loop: </p>

<pre>
&gt; imperative { 
    <span class="k">for</span> x <span class="k">in</span> 1 .. 5 <span class="k">do</span> 
      <span class="k">if</span> (x % 2 = 0) <span class="k">then</span> <span class="k">do!</span> continue
      printfn <span class="s">"number = %d"</span> x };;
&lt;em&gt;number = 1
number = 3
number = 5&lt;/em&gt;
</pre>

<p>The second example will use a <code>while</code> loop with <code>true</code> as the condition. However,
  we can now jump out of the loop, so the loop isn't infinite as it may look. We're using a single
  mutable variable (using F# reference cell) and we increment it in each iteration. When the number
  reaches some number, we'll stop looping using <code>break</code>:</p>

<pre>    
&gt; imperative { 
    <span class="k">let</span> x = ref 1
    <span class="k">while</span> <span class="k">true</span> <span class="k">do</span>
      <span class="k">if</span> (!x % 4 = 0) <span class="k">then</span> <span class="k">do!</span> break
      printfn <span class="s">"number = %d"</span> !x
      x := !x + 1 };;
&lt;em&gt;number = 1
number = 2
number = 3&lt;/em&gt;
</pre>

<h2>Summary</h2>
<p>As I already wrote in the introduction and in the first article of this series, the most interesting
  thing about the <code>imperative</code> computation builder is that it gives us a surprisingly elegant
  syntax to write imperative constructs in F#. The syntax almost doesn't differ from you'd write
  if F# supported these imperative constructs directly. On the other hand, the performance may be 
  an issue, because computation expressions are translated into member calls that take lambda 
  functions as arguments, so there is definitely some overhead.</p>
<p>The purpose of this article is first of all to demonstrate the flexibility of the F# language
  and to show an implementation of an interesting <em>computation expression</em>. Actually, 
  writing <code>break</code> and <code>continue</code> in functional languages isn't a new idea.
  There is an example how to do this using the <em>continuation monad</em> in Haskell [<a href="#imperfs2">1</a>]
  and Brian McNamara has posted a translation of this in F# [<a href="#imperfs2">2</a>]. However,
  none of these get us a very pleasant syntax, which is I believe quite important aspect.</p>

<h2>Downloads & References<a name="imperfs2"></a></h2>
<ul>
  <li><a href="/articles/imperative-fsharp/source2.zip">Download the example source code</a></li>
</ul>
<ul>
  <li>[1] <a type="external" href="http://www.haskell.org/all_about_monads/html/contmonad.html">The Continuation monad</a> - haskell.org</li>
  <li>[2] <a type="external" href="http://cs.hubfs.net/forums/thread/9309.aspx">Best way to express this?</a> - A reply by Brian McNamara at cs.hubfs.net</li>
</ul>


<div class="row">
  <div class="small-6 columns"><p class="post-discuss">
		Discuss <a href="http://twitter.com/tomaspetricek">on twitter</a>, <script type="text/javascript" src="http://www.reddit.com/buttonlite.js?i=0"></script>.<br />
		Send corrections via <a href="https://github.com/tpetricek/TomaspNet.Website">GitHub pull requests</a>.
	</p></div>
  <div class="small-6 columns">

<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style addthis_16x16_style">
<a class="addthis_button_twitter"></a>
<a class="addthis_button_reddit"></a>
<a class="addthis_button_google_plusone_share"></a>
<a class="addthis_button_hackernews"></a>
<a class="addthis_button_facebook"></a>
<a class="addthis_button_compact"></a><a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript">var addthis_config = { "data_track_addressbar": false };</script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-521c32162e6001a0"></script>
<!-- AddThis Button END -->

<p class="post-meta">
  <span><strong>Published</strong> Saturday, 25 April 2009, 4:31 PM</span><br />      
  <span><strong>By</strong> <a href="https://plus.google.com/+TomasPetriceks?rel=author">Tomas Petricek</a></span><br />
  <span class="tags"><strong>Tags</strong> Functional Programming in .NET,F# language</span>
</p>

  </div>
</div>

    </content>

  </div>
  <div class="large-4 columns" id="right-bar">
    <div class="right-item" id="right-calendar">
<script type="text/javascript">
  var monthNames =
    ["January", "February", "March", "April", "May", "June",
      "July", "August", "September", "October", "November", "December"];
  var d = new Date();
  var m = monthNames[d.getMonth()];
  var y = d.getFullYear();
  var ml = m.toLowerCase();
  document.writeln("<h4>Calendar - " + m + " " + y + "</h4>");
  document.writeln("<a href=\"http://tomasp.net/calendar/" + y + "/" + ml + ".html\">" +
    "<img src=\"http://tomasp.net/calendar/" + y + "/" + ml + "-preview.jpg\" style=\"border-style:none;\" />" +
    "</a>");
</script>
<p>The calendar shows a new picture each month. See photos for
  <a href="http://tomasp.net/calendar/2005">2005</a>, <a href="http://tomasp.net/calendar/2006">2006</a>,
  <a href="http://tomasp.net/calendar/2007">2007</a>, <a href="http://tomasp.net/calendar/2008">2008</a>,
  <a href="http://tomasp.net/calendar/2009">2009</a>, <a href="http://tomasp.net/calendar/2010">2010</a>,
  <a href="http://tomasp.net/calendar/2011">2011</a>, <a href="http://tomasp.net/calendar/2012">2012</a>,
  <a href="http://tomasp.net/calendar/2013">2013</a>, <a href="http://tomasp.net/calendar/2014">2014</a>,
  <a href="http://tomasp.net/calendar/2015">2015</a>
  and the first photos of <a href="http://tomasp.net/calendar/2016">2016</a>.
</p>
</div>


    <h3>Welcome!</h3>
    <img src="http://tomasp.net/img/tomas.jpg" alt="Tomas Petricek" style="float:right;margin:10px 0px 10px 10px;" />
    <p>I'm an F# open-source developer, book author and computer scientist. I submitted my PhD thesis recently.
      When offline, I enjoy traveling and taking pictures. You can find me at
      at <a href="http://twitter.com/tomaspetricek">@tomaspetricek</a> or email
      <a href="mailto:tomas@tomasp.net">tomas@tomasp.net</a>.
    </p>

    <h4>Trainings and consulting</h4>
    <a href="http://fsharpworks.com"><img src="http://tomasp.net/img/fsharpworks.png" alt="fsharpWorks" style="float:right;margin:15px 0px 10px 10px; width:150px" /></a>
    <p>I'm an experienced F# developer and trainer. <br /> I offer training and consulting
      services through <a href="http://fsharpworks.com">fsharpWorks</a>.
    </p>
    <ul>
      <li>Check out my <a href="http://fsharpworks.com/workshops/fast-track.html">in-person Fast Track to F#</a> course</li>
      <li>Check out my <a href="http://fsharpworks.com/workshops/finance.html">online F# in Finance</a> course</li>
      <li><a href="mailto:tomas@tomasp.net">Email me</a> for info about private trainings</li>
    </ul>

    <script type="text/javascript" src="http://tomasp.net/news/news.js"></script>
    <h4>What's new? &#160; <small><script type="text/javascript">document.write(news.date)</script></small></h4>
    <script>
      document.write(news.info);
    </script>

<!--
    <h4>Functional F# and C# books</h4>
    <div style="float:right;">
      <a href="http://www.amazon.com/gp/product/1933988924/ref=as_li_tf_il?ie=UTF8&tag=httptomasnet-20&linkCode=as2&camp=217145&creative=399369&creativeASIN=1933988924">
        <img src="http://tomasp.net/img/deepdives.png" alt="F# Deep Dives" style="float:right;margin:15px 0px 15px 10px;border-style:none;" />
      </a>
    </div>
    <p>
      I wrote or contributed to two books on F# and functional programming:
      <a href="http://functional-programming.net/rwfp">Real World Functional Programming</a> explains functional
      concepts using F# and C# and <a href="http://functional-programming.net/deepdives">F# Deep Dives</a> is a
      collection of case studies written by industry experts.</p>
    <ul>
      <li><a href="http://functional-programming.net/rwfp"><strong>Real World Functional Programming</strong></a> home page. See
        <a href="http://manning.com/petricek">Manning</a>,
        <a href="https://www.amazon.com/dp/1933988924?tag=httptomasnet-20&camp=213381&creative=390973&linkCode=as4&creativeASIN=1933988924&adid=0F1DP260JGG4KY0CDGP6">Amazon.com</a> or
        <a href="https://www.amazon.co.uk/dp/1933988924?tag=tomasnet-21&camp=1406&creative=6394&linkCode=as1&creativeASIN=1933988924&adid=1CTY87YCCQEJW965GNDF">Amazon.co.uk</a>.
      </li>
      <li><a href="http://functional-programming.net/deepdives"><strong>F# Deep Dives</strong></a> home page. Get it from
        <a href="http://www.manning.com/petricek2">Manning.com</a>,
        <a href="http://www.amazon.com/gp/product/1617291323/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1617291323&linkCode=as2&tag=httptomasnet-20&linkId=U4FPJJSKKCCKGNHD">Amazon.com</a> or
        <a href="http://www.amazon.co.uk/gp/product/1617291323/ref=as_li_tl?ie=UTF8&camp=1634&creative=19450&creativeASIN=1617291323&linkCode=as2&tag=tomasnet-21&linkId=HTUYVHHGWB4Q7X6V">Amazon.co.uk</a>.
      </li>
    </ul>
    <p>I also wrote a series of tutorials on <a href="http://www.tryfsharp.org/Learn/financial-computing">financial computing for Try F#</a>.
      This interactive environment let's you try F# in the browser.</p>

    <h4>Research and teaching</h4>
    <img src="http://tomasp.net/img/cam.png" alt="University of Cambride" style="float:right;margin:25px 0px 10px 10px;" />
    <p>I submitted my PhD thesis at the <a href="http://www.cl.cam.ac.uk/">University of Cambridge</a>,
      working on making better types for programs that run in rich context (like F# type providers, distributed
      prog&shy;ramming or data-flow). See <a href="http://tomasp.net/academic/">my academic page</a> for
      more.</p>

    <h4>Blog tags</h4>
    <p>

      <a href="http://tomasp.net/blog/tag/fsharp/">f#</a>&nbsp;(109),       <a href="http://tomasp.net/blog/tag/research/">research</a>&nbsp;(35),       <a href="http://tomasp.net/blog/tag/functional-programming/">functional programming</a>&nbsp;(19),       <a href="http://tomasp.net/blog/tag/web/">web</a>&nbsp;(10),       <a href="http://tomasp.net/blog/tag/data-science/">data science</a>&nbsp;(6),       <a href="http://tomasp.net/blog/tag/programming-languages/">programming languages</a>&nbsp;(4),       <a href="http://tomasp.net/blog/tag/talks/">talks</a>&nbsp;(7),       <a href="http://tomasp.net/blog/tag/philosophy/">philosophy</a>&nbsp;(4),       <a href="http://tomasp.net/blog/tag/fslab/">fslab</a>&nbsp;(4),       <a href="http://tomasp.net/blog/tag/coeffects/">coeffects</a>&nbsp;(3),       <a href="http://tomasp.net/blog/tag/type-providers/">type providers</a>&nbsp;(3),       <a href="http://tomasp.net/blog/tag/data-journalism/">data journalism</a>&nbsp;(2),       <a href="http://tomasp.net/blog/tag/visualization/">visualization</a>&nbsp;(1),       <a href="http://tomasp.net/blog/tag/machine-learning/">machine learning</a>&nbsp;(1)    </p>
-->
  </div>
</div>


  <div class="row" id="footer">
  <footer>
    <div class="large-3 columns">
      <h4>Contact & about</h4>
      <p>This site is hosted on GitHub and is generated using <a href="https://github.com/tpetricek/FSharp.Formatting">F# Formatting</a>.
        For more info, see the <a href="https://github.com/tpetricek/TomaspNet.Website">website source on GitHub</a>.
      </p>
      <p>Please submit issues & corrections on GitHub. Use pull requests for minor corrections only.</p>
      <ul>
        <li>Email me: <a href="mailto:tomas@tomasp.net">tomas@tomasp.net</a></li>
        <li>Connect via Twitter: <a href="http://twitter.com/tomaspetricek">@tomaspetricek</a></li>
        <li>More: <a href="http://uk.linkedin.com/in/tomaspetricek">LinkedIn</a> | <a href="http://lanyrd.com/profile/tomasp/">Lanyrd</a> | <a href="https://github.com/tpetricek">GitHub</a></li>
      </ul>
    </div>
    <div class="large-7 columns">
    <h4>Blog archives <a href="http://tomasp.net/rss.xml"><img src="http://tomasp.net/img/rss.gif" /></a></h4>
      <a href="http://tomasp.net/blog/archive/june-2016/index.html">
        June 2016 (1)</a>,      <a href="http://tomasp.net/blog/archive/april-2016/index.html">
        April 2016 (1)</a>,      <a href="http://tomasp.net/blog/archive/december-2015/index.html">
        December 2015 (2)</a>,      <a href="http://tomasp.net/blog/archive/november-2015/index.html">
        November 2015 (1)</a>,      <a href="http://tomasp.net/blog/archive/september-2015/index.html">
        September 2015 (3)</a>,      <a href="http://tomasp.net/blog/archive/july-2015/index.html">
        July 2015 (1)</a>,      <a href="http://tomasp.net/blog/archive/june-2015/index.html">
        June 2015 (1)</a>,      <a href="http://tomasp.net/blog/archive/may-2015/index.html">
        May 2015 (2)</a>,      <a href="http://tomasp.net/blog/archive/april-2015/index.html">
        April 2015 (3)</a>,      <a href="http://tomasp.net/blog/archive/march-2015/index.html">
        March 2015 (2)</a>,      <a href="http://tomasp.net/blog/archive/february-2015/index.html">
        February 2015 (1)</a>,      <a href="http://tomasp.net/blog/archive/january-2015/index.html">
        January 2015 (2)</a>,      <a href="http://tomasp.net/blog/archive/december-2014/index.html">
        December 2014 (1)</a>,      <a href="http://tomasp.net/blog/archive/may-2014/index.html">
        May 2014 (3)</a>,      <a href="http://tomasp.net/blog/archive/april-2014/index.html">
        April 2014 (2)</a>,      <a href="http://tomasp.net/blog/archive/march-2014/index.html">
        March 2014 (1)</a>,      <a href="http://tomasp.net/blog/archive/january-2014/index.html">
        January 2014 (2)</a>,      <a href="http://tomasp.net/blog/archive/december-2013/index.html">
        December 2013 (1)</a>,      <a href="http://tomasp.net/blog/archive/november-2013/index.html">
        November 2013 (1)</a>,      <a href="http://tomasp.net/blog/archive/october-2013/index.html">
        October 2013 (1)</a>,      <a href="http://tomasp.net/blog/archive/september-2013/index.html">
        September 2013 (1)</a>,      <a href="http://tomasp.net/blog/archive/august-2013/index.html">
        August 2013 (2)</a>,      <a href="http://tomasp.net/blog/archive/may-2013/index.html">
        May 2013 (1)</a>,      <a href="http://tomasp.net/blog/archive/april-2013/index.html">
        April 2013 (1)</a>,      <a href="http://tomasp.net/blog/archive/march-2013/index.html">
        March 2013 (1)</a>,      <a href="http://tomasp.net/blog/archive/february-2013/index.html">
        February 2013 (1)</a>,      <a href="http://tomasp.net/blog/archive/january-2013/index.html">
        January 2013 (1)</a>,      <a href="http://tomasp.net/blog/archive/december-2012/index.html">
        December 2012 (2)</a>,      <a href="http://tomasp.net/blog/archive/october-2012/index.html">
        October 2012 (1)</a>,      <a href="http://tomasp.net/blog/archive/august-2012/index.html">
        August 2012 (3)</a>,      <a href="http://tomasp.net/blog/archive/june-2012/index.html">
        June 2012 (2)</a>,      <a href="http://tomasp.net/blog/archive/april-2012/index.html">
        April 2012 (1)</a>,      <a href="http://tomasp.net/blog/archive/march-2012/index.html">
        March 2012 (4)</a>,      <a href="http://tomasp.net/blog/archive/february-2012/index.html">
        February 2012 (5)</a>,      <a href="http://tomasp.net/blog/archive/january-2012/index.html">
        January 2012 (2)</a>,      <a href="http://tomasp.net/blog/archive/november-2011/index.html">
        November 2011 (5)</a>,      <a href="http://tomasp.net/blog/archive/august-2011/index.html">
        August 2011 (3)</a>,      <a href="http://tomasp.net/blog/archive/july-2011/index.html">
        July 2011 (2)</a>,      <a href="http://tomasp.net/blog/archive/june-2011/index.html">
        June 2011 (2)</a>,      <a href="http://tomasp.net/blog/archive/may-2011/index.html">
        May 2011 (2)</a>,      <a href="http://tomasp.net/blog/archive/march-2011/index.html">
        March 2011 (4)</a>,      <a href="http://tomasp.net/blog/archive/december-2010/index.html">
        December 2010 (1)</a>,      <a href="http://tomasp.net/blog/archive/november-2010/index.html">
        November 2010 (6)</a>,      <a href="http://tomasp.net/blog/archive/october-2010/index.html">
        October 2010 (6)</a>,      <a href="http://tomasp.net/blog/archive/september-2010/index.html">
        September 2010 (4)</a>,      <a href="http://tomasp.net/blog/archive/july-2010/index.html">
        July 2010 (3)</a>,      <a href="http://tomasp.net/blog/archive/june-2010/index.html">
        June 2010 (2)</a>,      <a href="http://tomasp.net/blog/archive/may-2010/index.html">
        May 2010 (1)</a>,      <a href="http://tomasp.net/blog/archive/february-2010/index.html">
        February 2010 (2)</a>,      <a href="http://tomasp.net/blog/archive/january-2010/index.html">
        January 2010 (3)</a>,      <a href="http://tomasp.net/blog/archive/december-2009/index.html">
        December 2009 (3)</a>,      <a href="http://tomasp.net/blog/archive/july-2009/index.html">
        July 2009 (1)</a>,      <a href="http://tomasp.net/blog/archive/june-2009/index.html">
        June 2009 (3)</a>,      <a href="http://tomasp.net/blog/archive/may-2009/index.html">
        May 2009 (2)</a>,      <a href="http://tomasp.net/blog/archive/april-2009/index.html">
        April 2009 (1)</a>,      <a href="http://tomasp.net/blog/archive/march-2009/index.html">
        March 2009 (2)</a>,      <a href="http://tomasp.net/blog/archive/february-2009/index.html">
        February 2009 (1)</a>,      <a href="http://tomasp.net/blog/archive/december-2008/index.html">
        December 2008 (1)</a>,      <a href="http://tomasp.net/blog/archive/november-2008/index.html">
        November 2008 (5)</a>,      <a href="http://tomasp.net/blog/archive/october-2008/index.html">
        October 2008 (1)</a>,      <a href="http://tomasp.net/blog/archive/september-2008/index.html">
        September 2008 (1)</a>,      <a href="http://tomasp.net/blog/archive/june-2008/index.html">
        June 2008 (1)</a>,      <a href="http://tomasp.net/blog/archive/march-2008/index.html">
        March 2008 (3)</a>,      <a href="http://tomasp.net/blog/archive/february-2008/index.html">
        February 2008 (1)</a>,      <a href="http://tomasp.net/blog/archive/december-2007/index.html">
        December 2007 (2)</a>,      <a href="http://tomasp.net/blog/archive/november-2007/index.html">
        November 2007 (6)</a>,      <a href="http://tomasp.net/blog/archive/october-2007/index.html">
        October 2007 (1)</a>,      <a href="http://tomasp.net/blog/archive/september-2007/index.html">
        September 2007 (1)</a>,      <a href="http://tomasp.net/blog/archive/august-2007/index.html">
        August 2007 (1)</a>,      <a href="http://tomasp.net/blog/archive/july-2007/index.html">
        July 2007 (2)</a>,      <a href="http://tomasp.net/blog/archive/april-2007/index.html">
        April 2007 (2)</a>,      <a href="http://tomasp.net/blog/archive/march-2007/index.html">
        March 2007 (3)</a>,      <a href="http://tomasp.net/blog/archive/february-2007/index.html">
        February 2007 (3)</a>,      <a href="http://tomasp.net/blog/archive/january-2007/index.html">
        January 2007 (2)</a>,      <a href="http://tomasp.net/blog/archive/november-2006/index.html">
        November 2006 (1)</a>,      <a href="http://tomasp.net/blog/archive/october-2006/index.html">
        October 2006 (3)</a>,      <a href="http://tomasp.net/blog/archive/august-2006/index.html">
        August 2006 (2)</a>,      <a href="http://tomasp.net/blog/archive/july-2006/index.html">
        July 2006 (1)</a>,      <a href="http://tomasp.net/blog/archive/june-2006/index.html">
        June 2006 (3)</a>,      <a href="http://tomasp.net/blog/archive/may-2006/index.html">
        May 2006 (2)</a>,      <a href="http://tomasp.net/blog/archive/april-2006/index.html">
        April 2006 (2)</a>,      <a href="http://tomasp.net/blog/archive/december-2005/index.html">
        December 2005 (1)</a>,      <a href="http://tomasp.net/blog/archive/july-2005/index.html">
        July 2005 (4)</a>,      <a href="http://tomasp.net/blog/archive/june-2005/index.html">
        June 2005 (5)</a>,      <a href="http://tomasp.net/blog/archive/may-2005/index.html">
        May 2005 (1)</a>,      <a href="http://tomasp.net/blog/archive/april-2005/index.html">
        April 2005 (3)</a>,      <a href="http://tomasp.net/blog/archive/march-2005/index.html">
        March 2005 (3)</a>,      <a href="http://tomasp.net/blog/archive/january-2005/index.html">
        January 2005 (1)</a>,      <a href="http://tomasp.net/blog/archive/december-2004/index.html">
        December 2004 (3)</a>,      <a href="http://tomasp.net/blog/archive/november-2004/index.html">
        November 2004 (2)</a>,    </div>
    <div class="large-2 columns">
      <h4>License</h4>
      <p>Unless explicitly mentioned, all articles on this site are licensed under <a href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution Share Alike</a>.
        All source code samples are licensed under Apache 2.0.
      </p>
      <img src="http://tomasp.net/img/cc-sa.png" alt="CC License logo" />
    </div>
  </footer>
  </div>

  <script>
  document.write('<script src=' +
  ('__proto__' in {} ? 'http://tomasp.net/js/vendor/zepto' : 'http://tomasp.net/js/vendor/jquery') +
  '.js><\/script>')
  </script>

  <script src="http://tomasp.net/js/foundation.min.js"></script>
  <script>
    $(document).foundation();
  </script>
  <script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1561220-1']);
    _gaq.push(['_trackPageview']);

    (function () {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

  </script>
  <script src="http://cdn.lanyrd.net/badges/person-v1.min.js"></script>
</body>
</html>
